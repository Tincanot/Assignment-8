# Assignment 8

![The original vizualization](bad_visualization.webp)

### Creating the first table with data from data.csv

Using `read_csv2` instead of `read_csv` to accommodate to convention of the data.csv file. 

(European standard: column separator ";" and decimal separator ",")

```{r}
#adding the needed libraries
library(readr)
library(ggplot2)
library(dplyr)
library(tidyr)

#originally contained the whole path to the data.scv file
#using read_csv2 to accommodate to separators in the data.csv file
data_table <- read_csv2("data.csv")

#chance to check if the table is correct
head(data_table)
```

### Conversion of the table to long format

```{r}
#conversion to long version (on which a plot can be based)
data_long <- data_table %>%
  pivot_longer(
    #all column without "Demographics"
    cols = -Demographics,
    #creating the "Position" category
    names_to = "Position",
    values_to = "Percent"
  ) %>%
  #calculating the data so it can be shown as percents
  mutate(Percent = Percent * 100)

head(data_long)
```

### Creation of the ggplot

I strived to recreate a clustered column chart from my Assignment-6. 

![My version of the visualization](Column_chart.png)

It is the least illegible version of it. 

```{r}
#creating a ggplot (differentiating color of the column by "Position")
ggplot(data_long, aes(x = Demographics, y = Percent, fill = Position)) +
  #creating a clustered column chart
  geom_col(position = "dodge") +
  #adding cosmetics (additional texts)
  geom_text(aes(label = Percent), 
            position = position_dodge(width = 0.9), 
            vjust = -0.5) +
  #addition for easier visuals
  theme_minimal()
  
```

